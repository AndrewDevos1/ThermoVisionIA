<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dashboard ThermoVision</title>
        <!-- Carregando Tailwind CSS para estilos modernos e responsivos -->
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            /* Define a fonte Inter globalmente */
            @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;800&display=swap");
            body {
                font-family: "Inter", sans-serif;
            }

            /* Estilo customizado para os cartoes (fundo, borda e sombra) */
            .cartao-principal {
                /* Sombra escura e pronunciada */
                box-shadow: 6px 6px 0px #18181b;
                border: 2px solid #18181b;
            }

            /* Estilo para os botões de ação e conexão (sombra e hover) */
            .btn-acao {
                border: 2px solid #18181b;
                border-radius: 0.5rem;
                box-shadow: 4px 4px 0px #18181b;
                transition: all 0.2s ease-in-out;
            }
            .btn-acao:hover {
                transform: translate(2px, 2px);
                box-shadow: 2px 2px 0px #18181b;
            }

            /* Estilo para a imagem de streaming para garantir que preencha a area */
            #camera-stream {
                width: 100%;
                height: 100%;
                object-fit: cover; /* Garante que o vídeo preencha o container */
                border-radius: 10px;
            }

            /* Classes de icones (Fallback) */
            .icon-svg {
                width: 24px;
                height: 24px;
            }
        </style>
    </head>
    <body class="min-h-screen bg-gray-50 text-zinc-900">
        <div class="min-h-screen flex">
            <!-- Sidebar desktop -->
            <aside
                id="sidebar-desktop"
                class="hidden lg:flex flex-col w-64 bg-slate-900 text-white shadow-xl"
            >
                <div class="px-5 py-6 border-b border-white/10">
                    <div class="flex items-center gap-3">
                        <div class="p-2 rounded-lg bg-white/10">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="1.5"
                                    d="M3 7.5h18M3 12h18M3 16.5h18"
                                />
                            </svg>
                        </div>
                        <div>
                            <p class="text-xs uppercase tracking-wide text-white/60">
                                ThermoVisionIA
                            </p>
                            <p class="text-lg font-bold">Painel</p>
                        </div>
                    </div>
                </div>
                <nav class="flex-1 px-3 py-6 space-y-2">
                    <a
                        href="#"
                        data-target="dashboard"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                                d="m3 12 8.485-8.485a.75.75 0 0 1 1.06 0L21 12m-2.25-2.25v8.75a.75.75 0 0 1-.75.75h-4.5v-4.5h-3v4.5H6a.75.75 0 0 1-.75-.75v-8.75"
                            />
                        </svg>
                        <span>Dashboard</span>
                    </a>
                    <a
                        href="#add"
                        data-target="add"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6.75 7.5h-.5a2 2 0 0 0-2 2v6.75a2 2 0 0 0 2 2h11.5a2 2 0 0 0 2-2V9.5a2 2 0 0 0-2-2h-.5l-1.2-2a1 1 0 0 0-.86-.5H8.81a1 1 0 0 0-.86.5l-1.2 2Z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 10.25a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Zm4.75-1h1.5m-0.75-0.75v1.5"/>
                        </svg>
                        <span>Adicionar Câmera</span>
                    </a>
                    <a
                        href="#streaming"
                        data-target="streaming"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                                d="M3.75 5.25h12.5a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-12.5a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1Zm17.5 2.5-4 2.3v2.4l4 2.3V7.75Z"
                            />
                        </svg>
                        <span>Streaming</span>
                    </a>
                    <a
                        href="#streaming"
                        data-target="streaming"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                                d="M6.75 5.25h10.5m-10.5 13.5h10.5m-10.5-6.75h10.5"
                            />
                        </svg>
                        <span>Ações rápidas</span>
                    </a>
                    <a
                        href="#streaming"
                        data-target="streaming"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                                d="M9.75 3.75v16.5m-5.5-7.5h15.5"
                            />
                        </svg>
                        <span>Status</span>
                    </a>
                </nav>
                <div class="px-4 py-4 border-t border-white/10 text-white/70 text-sm">
                    <p class="font-semibold text-white">Modo Demo</p>
                    <p>Streaming usa vídeo local se configurado.</p>
                    <div class="flex flex-col gap-2 mt-2">
                        <form action="{{ url_for('logout') }}" method="POST">
                            <button type="submit" class="btn-acao w-full py-2 text-sm bg-white text-zinc-900 font-semibold hover:bg-gray-100">
                                Sair
                            </button>
                        </form>
                        <a href="{{ url_for('perfil') }}" class="btn-acao w-full py-2 text-sm bg-gray-200 text-zinc-900 font-semibold hover:bg-gray-300 text-center">
                            Editar perfil
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Sidebar mobile -->
            <div
                id="sidebar-mobile"
                class="fixed inset-0 z-40 bg-black/50 hidden"
                aria-hidden="true"
            >
                <div class="w-72 h-full bg-slate-900 text-white shadow-xl p-4 flex flex-col">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <p class="text-xs uppercase tracking-wide text-white/60">
                                ThermoVisionIA
                            </p>
                            <p class="text-lg font-bold">Painel</p>
                        </div>
                        <button
                            id="fechar-menu-mobile"
                            class="p-2 rounded-lg bg-white/10 hover:bg-white/20"
                            aria-label="Fechar menu"
                        >
                            
                        </button>
                    </div>
                    <nav class="space-y-2 flex-1">
                        <a
                            href="#"
                            data-target="dashboard"
                            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                        >
                            <span class="text-lg"></span>
                            <span>Dashboard</span>
                        </a>
                        <a
                            href="#add"
                            data-target="add"
                            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                        >
                            <span class="text-lg"></span>
                            <span>Adicionar Câmera</span>
                        </a>
                        <a
                            href="#streaming"
                            data-target="streaming"
                            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                        >
                            <span class="text-lg"></span>
                            <span>Streaming</span>
                        </a>
                        <a
                            href="#streaming"
                            data-target="streaming"
                            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                        >
                            <span class="text-lg"></span>
                            <span>Ações rápidas</span>
                        </a>
                        <a
                            href="#streaming"
                            data-target="streaming"
                            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-white/80 hover:bg-white/10 hover:text-white transition"
                        >
                            <span class="text-lg"></span>
                            <span>Status</span>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Conteudo principal -->
            <div class="flex-1 flex flex-col">
                <header class="flex items-center justify-between px-4 md:px-8 py-4 bg-white border-b border-gray-200 shadow-sm">
                    <div class="flex items-center gap-3">
                        <button
                            id="abrir-menu-mobile"
                            class="lg:hidden p-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100"
                            aria-label="Abrir menu"
                        >
                            
                        </button>
                        <div>
                            <p class="text-xs uppercase tracking-wide text-gray-500">ThermoVisionIA</p>
                            <h1 class="text-xl font-extrabold">Dashboard</h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="hidden sm:inline text-sm text-gray-600">Perfil</span>
                        <div class="h-10 w-10 rounded-full bg-amber-500 text-zinc-900 font-bold flex items-center justify-center">
                            TV
                        </div>
                    </div>
                </header>

                <main class="flex-1 p-4 md:p-8">
                    <!-- Seção Dashboard (resumo) -->
                    <section id="sec-dashboard" class="space-y-8">
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div class="cartao-principal bg-white p-4 rounded-xl">
                                <p class="text-xs uppercase text-gray-500 font-semibold">
                                    Temp. média (Última hora)
                                </p>
                                <p class="text-3xl font-extrabold text-zinc-900 mt-2">68C</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    Ambiente estável, sem variações críticas.
                                </p>
                            </div>
                            <div class="cartao-principal bg-white p-4 rounded-xl">
                                <p class="text-xs uppercase text-gray-500 font-semibold">
                                    Pico registrado
                                </p>
                                <p class="text-3xl font-extrabold text-amber-600 mt-2">92C</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    ltimo pico ha 18 min.
                                </p>
                            </div>
                            <div class="cartao-principal bg-white p-4 rounded-xl">
                                <p class="text-xs uppercase text-gray-500 font-semibold">
                                    Alertas ativos
                                </p>
                                <p class="text-3xl font-extrabold text-red-600 mt-2">2</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    Revise sensores 03 e 07.
                                </p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-2 cartao-principal bg-white p-6 rounded-xl">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-2">
                                        <span class="text-lg"></span>
                                        <h2 class="text-xl font-bold">Transmissão da Câmera</h2>
                                    </div>
                                    <span class="text-sm text-gray-500">Última atualização: agora</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="p-4 rounded-lg border border-gray-200 bg-gray-50">
                                        <p class="text-sm font-semibold text-gray-700">Setor crítico</p>
                                        <p class="text-xl font-bold text-red-600 mt-2">Linha 2</p>
                                        <p class="text-sm text-gray-600">
                                            Temperatura 15% acima da média.
                                        </p>
                                    </div>
                                    <div class="p-4 rounded-lg border border-gray-200 bg-gray-50">
                                        <p class="text-sm font-semibold text-gray-700">Tendência</p>
                                        <p class="text-xl font-bold text-amber-600 mt-2">Aquecendo</p>
                                        <p class="text-sm text-gray-600">
                                            Monitore durante o próximo ciclo.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="cartao-principal bg-white p-6 rounded-xl">
                                <div class="flex items-center gap-2 mb-4">
                                    <span class="text-lg"></span>
                                    <h3 class="text-xl font-bold">Câmeras cadastradas</h3>
                                </div>
                                <ul class="space-y-3 text-sm text-gray-700">
                                    <li class="flex justify-between">
                                        <span>Câmera Demo</span>
                                        <span class="text-green-600 font-semibold">Ativa</span>
                                    </li>
                                    <li class="flex justify-between">
                                        <span>Câmera 01 (Linha 1)</span>
                                        <span class="text-yellow-600 font-semibold">Standby</span>
                                    </li>
                                    <li class="flex justify-between">
                                        <span>Câmera 02 (Linha 2)</span>
                                        <span class="text-red-600 font-semibold">Alerta</span>
                                    </li>
                                </ul>
                                <p class="text-xs text-gray-500 mt-3">
                                    Edite as fontes em tempo real no menu Streaming.
                                </p>
                            </div>
                        </div>
                    </section>

                    <!-- Seção Streaming -->
<section id="sec-streaming" class="space-y-8">
    <div id="streaming-list" class="space-y-6">
        <div class="cartao-principal bg-white p-6 rounded-xl viewer-card">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <div class="lg:col-span-2">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center space-x-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon-svg text-zinc-900">
                                <path fill-rule="evenodd" d="M1.371 6.837c.725-.625 1.701-.986 2.766-.986h3.693c.961 0 1.84.45 2.404 1.222l.966 1.328c.84.975 2.148 1.487 3.483 1.258a18.09 18.09 0 0 0 .88-6.19c.75.148 1.5.218 2.247.218 1.066 0 2.042-.36 2.766-.986.749-.646 1.218-1.579 1.218-2.585v-1.12c0-1.29-.75-2.482-1.977-3.032l-1.571-.703a.5.5 0 0 0-.317 0l-1.572.703C19.782.788 18.91 0 17.844 0H4.92c-1.066 0-2.042.36-2.766.986C1.371 1.63 0 2.456 0 3.327v1.12c0 1.006.469 1.939 1.218 2.586Zm19.13-3.41c0-.49-.138-.946-.395-1.324-.257-.378-.606-.677-1.018-.887l-.46-.231c-1.144-.575-2.433-.873-3.72-.873h-7.66C8.24 0 6.95 0 5.805.575l-.46.23c-.412.21-.761.509-1.018.887-.257.378-.395.834-.395 1.324v1.12c0 .49.138.946.395 1.324.257.378.606.677 1.018.887l.46.231c1.144.575 2.433.873 3.72.873h7.66c1.287 0 2.576-.298 3.72-.873l.46-.231c.412-.21.761-.509 1.018-.887.257-.378.395-.834.395-1.324v-1.12Zm-1.879 4.316c-.053-.024-.11-.044-.168-.063-.518-.168-1.05-.256-1.585-.256h-2.138c-1.42 0-2.735.61-3.79 1.768l-1.006 1.14c-.66.75-.992 1.637-.962 2.535l-.018 2.518c0 .276.224.5.5.5h14c.276 0 .5-.224.5-.5v-2.518c0-1.06-.48-2.062-1.32-2.775l-.64-1.049c-.58-1.026-1.588-1.61-2.712-1.61h-2.124Z" clip-rule="evenodd"></path>
                            </svg>
                            <h2 class="text-xl font-bold">Transmissão da Câmera</h2>
                        </div>
                        <div class="flex items-start gap-3">
                            <p class="text-xs font-light text-gray-500 hidden sm:block pt-1">Conecte sua câmera para começar a usar o ThermoVision</p>
                            <button class="btn-acao p-2 bg-gray-200 text-zinc-900 hover:bg-gray-300 remove-viewer" title="Fechar visualização">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6l12 12M6 18L18 6"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="flex items-center justify-between gap-3 mb-3">
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Selecionar Câmera:</label>
                                <div class="flex space-x-2">
                                    <select class="camera-select flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">Carregando câmeras...</option>
                                    </select>
                                    <button class="btn-acao px-3 py-2 bg-blue-500 text-white hover:bg-blue-600 refresh-cameras" title="Atualizar lista">
                                        &#x21bb;
                                    </button>
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row gap-2 items-start sm:items-center pt-6">
                                <button class="btn-acao px-3 py-2 bg-gray-200 text-zinc-900 font-bold hover:bg-gray-300 w-full sm:w-auto fullscreen-btn">Tela cheia</button>
                                <button class="btn-acao px-4 py-2 text-zinc-900 font-extrabold hover:bg-amber-600 w-full sm:w-auto bg-amber-500 connect-button">Conectar Câmera</button>
                            </div>
                        </div>
                    </div>

                    <div class="relative w-full aspect-video bg-gray-200 border-2 border-dashed border-gray-500 rounded-xl flex flex-col items-center justify-center p-4 min-h-[350px] video-container">
                        <img src="" alt="Live Video Feed" class="hidden camera-stream" />
                        <div class="text-center disconnected-message">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12 mx-auto mb-3 text-gray-500">
                                <path d="M4.5 4.5l3 3m12 0l-3-3m-9 3l3 3m-3-3l-3 3"></path>
                                <path fill-rule="evenodd" d="M11.25 5.688A11.954 11.954 0 0 1 12 4.5c1.111 0 2.19.18 3.23.538l-1.385 1.385A9.704 9.704 0 0 0 12 6.75c-.968 0-1.905.11-2.798.318L8.685 5.488ZM20.25 12c0-.518-.046-1.026-.135-1.524a41.288 41.288 0 0 0-.903-2.185l-1.42 1.42a8.25 8.25 0 0 1-.169 1.549h2.518ZM1.75 12c0 .518.046 1.026.135 1.524a41.288 41.288 0 0 0 .903 2.185l1.42-1.42a8.25 8.25 0 0 1 .169 1.549H1.885ZM12 2.25c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25Z" clip-rule="evenodd"></path>
                            </svg>
                            <p class="text-lg font-light text-gray-500 mt-2">Nenhuma Câmera conectada</p>
                            <p class="text-base font-light text-gray-500">Selecione uma câmera e clique em conectar</p>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="p-4 rounded-lg border border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-bold mb-3">Status</h3>
                        <div class="flex justify-between items-center py-3 border-t-2 border-gray-200">
                            <span class="font-semibold text-zinc-700">Câmera</span>
                            <div class="viewer-status px-4 py-1 rounded-full text-sm font-bold border bg-red-200 text-red-700 border-red-700">Desconectada</div>
                        </div>
                        <div class="flex justify-between items-center py-3 border-t-2 border-gray-200">
                            <span class="font-semibold text-zinc-700">Câmera Selecionada</span>
                            <span class="viewer-selected text-sm text-gray-600">Nenhuma</span>
                        </div>
                    </div>

                        <div class="p-4 rounded-lg border border-gray-200 bg-gray-50 space-y-3">
                            <h3 class="text-lg font-bold">Ações</h3>
                            <button class="btn-acao w-full py-3 bg-gray-200 text-zinc-900 font-bold hover:bg-gray-300">
                                Registrar imagem
                            </button>
                            <button class="btn-acao w-full py-3 bg-gray-200 text-zinc-900 font-bold hover:bg-gray-300">
                                Iniciar a captura (Análise contínua)
                            </button>
                            <button class="btn-acao w-full py-3 bg-gray-200 text-zinc-900 font-bold hover:bg-gray-300">
                                Ver Histórico
                            </button>
                            <div class="pt-2 border-t border-gray-200">
                                <button class="btn-acao w-full py-2 text-sm bg-white text-zinc-900 font-semibold hover:bg-gray-100 avancado-toggle">
                                    Funções avançadas
                                </button>
                                <div class="mt-2 p-3 border border-dashed border-gray-300 rounded-lg bg-gray-50 hidden bloco-avancado space-y-2">
                                    <div class="flex items-center gap-2">
                                        <label class="text-xs font-semibold text-gray-700">Script:</label>
                                        <button class="btn-acao px-2 py-1 bg-gray-200 text-xs text-zinc-900 hover:bg-gray-300 refresh-scripts">Atualizar</button>
                                    </div>
                                    <select class="script-select w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">Selecione um script...</option>
                                    </select>
                                    <div class="space-y-2">
                                        <div>
                                            <label class="text-xs font-semibold text-gray-700">Pasta de saida</label>
                                            <input type="text" class="output-dir-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="imagens (padrao)">
                                        </div>
                                        <div class="text-xs text-gray-600">Campos variam conforme o script escolhido.</div>
                                        <div class="script-dynamic-fields space-y-2"></div>
                                    </div>
                                    <div class="flex gap-2 pt-1">
                                        <button class="btn-acao flex-1 py-2 bg-blue-500 text-white text-sm font-semibold hover:bg-blue-600 executar-script">Executar script</button>
                                        <button class="btn-acao px-3 py-2 bg-amber-500 text-xs text-zinc-900 font-semibold hover:bg-amber-600 parar-script" disabled>Parar</button>
                                        <button class="btn-acao px-3 py-2 bg-gray-200 text-xs text-zinc-900 font-semibold hover:bg-gray-300 download-log" disabled>Baixar log</button>
                                    </div>
                                    <div class="text-xs text-gray-600 feedback-script">Selecione um script para executar.</div>
                                    <div class="bg-white border border-gray-200 rounded-lg p-2 h-32 overflow-auto text-[11px] text-gray-700 font-mono log-box">Sem logs ainda.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <button id="add-viewer" class="btn-acao w-full py-3 text-sm font-semibold bg-gray-200 text-zinc-900 hover:bg-gray-300">Adicionar outra visualização</button>
</section>
<!-- Seção Adicionar Câmera -->
                    <section id="sec-add" class="space-y-8 hidden">
                        <div class="cartao-principal bg-white p-6 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg"></span>
                                    <h2 class="text-xl font-bold">Transmissão da Câmera</h2>
                                </div>
                                <p class="text-xs text-gray-500">Configure URLs personalizadas de câmera</p>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div class="lg:col-span-2 space-y-4">
                                    <div class="p-4 rounded-lg border border-gray-200 bg-gray-50">
                                        <h3 class="text-lg font-semibold mb-3">Adicionar câmera</h3>
                                        <div class="space-y-3">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Modelo</label>
                                                <select id="beta-modelo" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <option value="custom">Personalizado (RTSP livre)</option>
                                                    <option value="intelbras">Intelbras (rtsp)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
                                                <input id="beta-nome" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex.: Linha 2 - RTSP" />
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">URL RTSP</label>
                                                <input id="beta-url" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="rtsp://usuario:senha@host:554/cam/realmonitor?channel=1&subtype=0" />
                                            </div>
                                            <div id="beta-intelbras-bloco" class="space-y-2 p-3 border border-dashed border-gray-300 rounded-lg bg-white hidden">
                                                <p class="text-sm font-semibold text-gray-700">Modelo Intelbras</p>
                                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-600 mb-1">Usuário</label>
                                                        <input id="intelbras-user" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="admin" />
                                                    </div>
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-600 mb-1">Senha</label>
                                                        <input id="intelbras-pass" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="senha" />
                                                    </div>
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-600 mb-1">IP</label>
                                                        <input id="intelbras-ip" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="192.168.x.x" />
                                                    </div>
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-600 mb-1">Porta</label>
                                                        <input id="intelbras-port" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="554" />
                                                    </div>
                                                </div>
                                                <div class="flex flex-wrap gap-2">
                                                    <button id="intelbras-auto" class="btn-acao px-3 py-2 bg-gray-200 text-zinc-900 hover:bg-gray-300">Auto completar</button>
                                                    <button id="intelbras-montar" class="btn-acao px-3 py-2 bg-blue-500 text-white hover:bg-blue-600">Montar URL</button>
                                                </div>
                                                <p class="text-xs text-gray-500">
                                                    Gera automaticamente a URL: rtsp://usuario:senha@ip:porta/cam/realmonitor?channel=1&subtype=0
                                                </p>
                                            </div>
                                            <div class="flex gap-3">
                                                <button id="beta-salvar" class="btn-acao px-4 py-2 bg-blue-500 text-white hover:bg-blue-600">Salvar</button>
                                                <button id="beta-testar" class="btn-acao px-4 py-2 bg-gray-200 text-zinc-900 hover:bg-gray-300">Testar conexão</button>
                                            </div>
                                            <p class="text-xs text-gray-500">
                                                As URLs ficam salvas apenas no seu navegador. Nao envie credenciais sensiveis para o servidor.
                                            </p>
                                        </div>
                                    </div>

                                    <div class="p-4 rounded-lg border border-gray-200 bg-gray-50">
                                        <h3 class="text-lg font-semibold mb-3">Feedback</h3>
                                        <div id="beta-feedback" class="text-sm text-gray-700">Aguardando ação...</div>
                                    </div>
                                </div>

                                <div class="space-y-3">
                                    <div class="flex items-center gap-2">
                                        <span class="text-lg"></span>
                                         <h3 class="text-lg font-semibold">Câmeras salvas</h3>
                                    </div>
                                    <div id="beta-lista" class="space-y-2 text-sm text-gray-700">
                                         <p class="text-gray-500">Nenhuma câmera cadastrada ainda.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="cartao-principal bg-white p-6 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg"></span>
                                     <h3 class="text-xl font-bold">Câmeras locais detectadas</h3>
                                </div>
                                <button id="add-local-refresh" class="btn-acao px-3 py-2 bg-gray-200 text-zinc-900 hover:bg-gray-300">Atualizar lista</button>
                            </div>
                            <div id="add-local-lista" class="space-y-2 text-sm text-gray-700">
                                 <p class="text-gray-500">Nenhuma câmera detectada ou não carregada ainda.</p>
                             </div>
                             <p class="text-xs text-amber-600 mt-3">
                                 Em WSL, webcams/USB não aparecem por padrão. Para usar webcam real, rode no Windows nativo ou exponha via usbipd e teste com frontend/test_camera.py.
                             </p>
                        </div>
                    </section>
                </main>
            </div>
        </div>

        <!-- Carregando o arquivo JavaScript externo -->
        <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    </body>
</html>


